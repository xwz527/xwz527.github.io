<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://xwz527.github.io</id>
    <title>wenzhengBlog</title>
    <updated>2020-05-02T02:35:57.960Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://xwz527.github.io"/>
    <link rel="self" href="https://xwz527.github.io/atom.xml"/>
    <subtitle>Well begun is half done!</subtitle>
    <logo>https://xwz527.github.io/images/avatar.png</logo>
    <icon>https://xwz527.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, wenzhengBlog</rights>
    <entry>
        <title type="html"><![CDATA[springbootä¹‹AOP]]></title>
        <id>https://xwz527.github.io/post/springboot-zhi-aop/</id>
        <link href="https://xwz527.github.io/post/springboot-zhi-aop/">
        </link>
        <updated>2020-05-02T02:11:36.000Z</updated>
        <content type="html"><![CDATA[<p>â€‹       é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆaspect-oriented programmingï¼‰ï¼Œæ˜¯ä¸€ç§å°†æ¨ªåˆ‡å…³æ³¨ç‚¹ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»çš„ç¼–ç¨‹æ–¹å¼ã€‚æ¯ä¸ªæ¨ªåˆ‡å…³æ³¨ç‚¹éƒ½é›†ä¸­åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œè€Œä¸æ˜¯åˆ†æ•£åœ¨å¤šå¤„ä»£ç ä¸­ã€‚è¿™æ ·ä½¿æˆ‘ä»¬çš„æœåŠ¡æ¨¡å—æ›´åŠ ç®€æ´ï¼Œå› ä¸ºå®ƒä»¬åªåŒ…å«äº†ä¸»è¦å…³æ³¨ç‚¹çš„ä»£ç ï¼Œè€Œæ¬¡è¦çš„åŠŸèƒ½æˆ–è€…è¯´è¾…åŠ©çš„åŠŸèƒ½è¢«è½¬ç§»åˆ°åˆ‡é¢ä¸­äº†ã€‚æ¯”å¦‚æƒé™æ ¡éªŒã€æ—¥å¿—è®°å½•ç­‰å¯ä»¥æ”¾åœ¨åˆ‡é¢å¤„è€Œä¸æ˜¯åœ¨æ¯ä¸ªä»£ç å—ä¸­éƒ½é‡å¤å»å†™è¿™éƒ¨åˆ†ã€‚</p>
<h1 id="æœ¯è¯­è§£é‡Š"><strong>æœ¯è¯­è§£é‡Šï¼š</strong></h1>
<h2 id="é€šçŸ¥advice">é€šçŸ¥ï¼ˆAdviceï¼‰</h2>
<p>Advice å®šä¹‰äº†åœ¨ pointcut é‡Œé¢å®šä¹‰çš„ç¨‹åºç‚¹å…·ä½“è¦åšçš„æ“ä½œï¼Œæ¯”å¦‚ä¸Šé¢æ‰€è¯´çš„æƒé™æ ¡éªŒã€æ—¥å¿—è®°å½•ç­‰é¢‘ç¹ä½¿ç”¨çš„åŠŸèƒ½å®ƒé€šè¿‡ beforeã€after å’Œ around æ¥åŒºåˆ«æ˜¯åœ¨æ¯ä¸ª joint point ä¹‹å‰ã€ä¹‹åè¿˜æ˜¯ä»£æ›¿æ‰§è¡Œçš„ä»£ç ã€‚</p>
<h2 id="è¿æ¥ç‚¹joinpoint">è¿æ¥ç‚¹ï¼ˆJoinPointï¼‰</h2>
<p>è¡¨ç¤ºåœ¨ç¨‹åºä¸­æ˜ç¡®å®šä¹‰çš„ç‚¹ï¼Œå…¸å‹çš„åŒ…æ‹¬æ–¹æ³•è°ƒç”¨ï¼Œå¯¹ç±»æˆå‘˜çš„è®¿é—®ä»¥åŠ<a href="https://baike.baidu.com/item/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86">å¼‚å¸¸å¤„ç†</a>ç¨‹åºå—çš„æ‰§è¡Œç­‰ç­‰ã€‚é€šä¿—çš„è¯´å°±æ˜¯springå…è®¸ä½ ä½¿ç”¨é€šçŸ¥çš„åœ°æ–¹ï¼ŒåŸºæœ¬æ¯ä¸ªæ–¹æ³•çš„å‰ï¼Œåï¼ˆä¸¤è€…éƒ½æœ‰ä¹Ÿè¡Œï¼‰ï¼Œæˆ–æŠ›å‡ºå¼‚å¸¸æ—¶éƒ½å¯ä»¥æ˜¯è¿æ¥ç‚¹ã€‚</p>
<h2 id="åˆ‡å…¥ç‚¹pointcut">åˆ‡å…¥ç‚¹ï¼ˆPointcutï¼‰</h2>
<p>è¡¨ç¤ºä¸€ç»„ joint pointï¼Œè¿™äº› joint point æˆ–æ˜¯é€šè¿‡é€»è¾‘å…³ç³»ç»„åˆèµ·æ¥ï¼Œæˆ–æ˜¯é€šè¿‡é€šé…ã€<a href="https://baike.baidu.com/item/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F">æ­£åˆ™è¡¨è¾¾å¼</a>ç­‰æ–¹å¼é›†ä¸­èµ·æ¥ï¼Œå®ƒå®šä¹‰äº†ç›¸åº”çš„ Advice å°†è¦å‘ç”Ÿçš„åœ°æ–¹ã€‚</p>
<h2 id="åˆ‡é¢aspect">åˆ‡é¢ï¼ˆAspectï¼‰</h2>
<p>åˆ‡é¢æ˜¯é€šçŸ¥å’Œåˆ‡å…¥ç‚¹çš„ç»“åˆã€‚åœ¨ Aspect ä¸­ä¼šåŒ…å«ç€ä¸€äº› Pointcut ä»¥åŠç›¸åº”çš„ Adviceã€‚</p>
<h1 id="springbootä¹‹aop">SpringBootä¹‹AOPï¼š</h1>
<h2 id="1å¼•å…¥ä¾èµ–"><strong>1.å¼•å…¥ä¾èµ–</strong></h2>
   <!--åŠ å…¥SpringBoot-AOPä¾èµ–-->
<pre><code>    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;
    &lt;/dependency&gt;
</code></pre>
<h2 id="2æ™®é€šç±»æ–¹æ³•åˆ‡é¢ç±»"><strong>2.æ™®é€šç±»æ–¹æ³•åˆ‡é¢ç±»</strong></h2>
<p>@Aspect<br>
@Component<br>
public class AopTestAspect {</p>
<pre><code>/**
 * 1.é€šé…ç¬¦
 * [*]  åŒ¹é…ä»»æ„å­—ç¬¦ï¼Œä½†åªèƒ½åŒ¹é…ä¸€ä¸ªå…ƒç´ 
 * [..] åŒ¹é…ä»»æ„å­—ç¬¦ï¼Œå¯ä»¥åŒ¹é…ä»»æ„å¤šä¸ªå…ƒç´ ï¼Œè¡¨ç¤ºç±»æ—¶ï¼Œå¿…é¡»å’Œ*è”åˆä½¿ç”¨
 * [+]  å¿…é¡»è·Ÿåœ¨ç±»ååé¢ï¼Œå¦‚Horseman+ï¼Œè¡¨ç¤ºç±»æœ¬èº«å’Œç»§æ‰¿æˆ–æ‰©å±•æŒ‡å®šç±»çš„æ‰€æœ‰ç±»
 * åˆ‡ç‚¹è¡¨è¾¾å¼åˆ†ä¸º ä¿®é¥°ç¬¦  è¿”å›ç±»å‹  åŒ…è·¯å¾„  æ–¹æ³•å  å‚æ•°
 * 2.åˆ‡ç‚¹è¡¨è¾¾å¼
 * 3.é€»è¾‘è¿ç®—ç¬¦
 * è¡¨è¾¾å¼å¯ç”±å¤šä¸ªåˆ‡ç‚¹å‡½æ•°é€šè¿‡é€»è¾‘è¿ç®—ç»„æˆ
 *   &amp;&amp; ä¸æ“ä½œï¼Œæ±‚äº¤é›†ï¼Œä¹Ÿå¯ä»¥å†™æˆand
 * ä¾‹å¦‚ execution(* test(..)) &amp;&amp; target(Test)  è¡¨ç¤ºTeståŠå…¶å­ç±»çš„testæ–¹æ³•
 *   || æˆ–æ“ä½œï¼Œä»»ä¸€è¡¨è¾¾å¼æˆç«‹å³ä¸ºtrueï¼Œä¹Ÿå¯ä»¥å†™æˆ or
 * ä¾‹å¦‚ execution(* test(..)) || args(String)  è¡¨ç¤ºåç§°ä¸ºchopçš„æ–¹æ³•æˆ–è€…æœ‰ä¸€ä¸ªStringå‹å‚æ•°çš„æ–¹æ³•
 *   ! éæ“ä½œï¼Œè¡¨è¾¾å¼ä¸ºfalseåˆ™ç»“æœä¸ºtrueï¼Œä¹Ÿå¯ä»¥å†™æˆ not
 * ä¾‹å¦‚ execution(* test(..)) and !args(String)  è¡¨ç¤ºåç§°ä¸ºchopçš„æ–¹æ³•ä½†æ˜¯ä¸èƒ½æ˜¯åªæœ‰ä¸€ä¸ªStringå‹å‚æ•°çš„æ–¹æ³•
 */

/**
 * åˆ‡ç‚¹ä¸ºTestServiceImplç±»ä¸‹çš„testæ–¹æ³•
 * &quot;execution(* com.example.demo.service.impl.TestServiceImpl.test())&quot;
 *
 * åˆ‡ç‚¹ä¸ºTestServiceImpç±»ä¸‹çš„æ‰€æœ‰å¸¦ä»»æ„å‚æ•°çš„æ–¹æ³•
 */
@Pointcut(&quot;execution(* com.example.demo.service.impl.TestServiceImp.*(..))&quot;)
public void testServicePoc(){
}

/**
 * ç¯ç»•é€šçŸ¥åœ¨ target å¼€å§‹å’Œç»“æŸæ‰§è¡Œ
 * å¦‚æœåœ¨ç¯ç»•é€šçŸ¥æ–¹æ³•ä¸­æœ‰å¼‚å¸¸æ•è·ï¼Œåˆ™ä¼šç›´æ¥æ•è·å¼‚å¸¸ï¼Œä¸ä¼šå†å‘å¤–æŠ›å‡º
 * @param point
 * @return
 */
@Around(value = &quot;testServicePoc()&quot;)
public Object around(ProceedingJoinPoint point) {
    long start = System.currentTimeMillis();
    //è·å–åˆ‡ç‚¹æ‰§è¡Œçš„æ–¹æ³•
    String methodName = point.getSignature().getName();
    log.info(&quot;around method name: {} params: {}&quot;, methodName, Arrays.asList(point.getArgs()));
    try {
        log.info(&quot;around end time: {}&quot;, (System.currentTimeMillis() - start) + &quot; ms!&quot;);
        return point.proceed();
    } catch (Throwable e) {
        log.error(&quot;message: {}&quot;, e.getMessage());
    }
    return null;
}

/**
 * * å‰ç½®é€šçŸ¥åœ¨ target å‰æ‰§è¡Œ
 * @param joinPoint
 */
@Before(value = &quot;testServicePoc()&quot;)
public void beforeMethod(JoinPoint joinPoint) {
    String methodName = joinPoint.getSignature().getName();
    List&lt;Object&gt; args = Arrays.asList(joinPoint.getArgs());
    log.info(&quot;before inform method name: {} param: {}&quot;, methodName, args);
}

/**
 * åç½®é€šçŸ¥åœ¨targetåæ‰§è¡Œ
 *
 * @param joinPoint
 */
@After(value = &quot;testServicePoc()&quot;)
public void afterMethod(JoinPoint joinPoint) {
    String methodName = joinPoint.getSignature().getName();
    List&lt;Object&gt; args = Arrays.asList(joinPoint.getArgs());
    log.info(&quot;after inform method name : {} param: {}&quot;, methodName, args);
}

/**
 * åœ¨targetæ‰§è¡ŒæˆåŠŸè¿”å›åæ‰§è¡Œ
 *
 * @param joinPoint
 * @param result
 */
@AfterReturning(value = &quot;testServicePoc()&quot;,returning = &quot;result&quot;)
public void afterReturning(JoinPoint joinPoint, Object result) {
    String methodName = joinPoint.getSignature().getName();
    log.info(&quot;afterReturning inform method name: {} return value: {}&quot;, methodName, result);
}

/**
 * åœ¨targetæŠ›å‡ºå¼‚å¸¸åæ‰§è¡Œ
 *
 * @param joinPoint
 * @param ex
 */
  
@AfterThrowing(value = &quot;testServicePoc()&quot;,throwing = &quot;ex&quot;)
public void afterThrowing(JoinPoint joinPoint, Exception ex) {
    String methodName = joinPoint.getSignature().getName();
    log.info(&quot;afterThrowing inform method name: {} exceptions: {}&quot;,methodName, ex);
}
</code></pre>
<p>}</p>
<h2 id="3è‡ªå®šä¹‰æ³¨è§£æ–¹æ³•åˆ‡é¢ç±»">3.<strong>è‡ªå®šä¹‰æ³¨è§£æ–¹æ³•åˆ‡é¢ç±»</strong></h2>
<h3 id="1è‡ªå®šä¹‰æ³¨è§£">1.è‡ªå®šä¹‰æ³¨è§£</h3>
<figure data-type="image" tabindex="1"><img src="https://xwz527.github.io/post-images/1588385703020.jpg" alt="" loading="lazy"></figure>
<h3 id="2è‡ªå®šä¹‰åˆ‡é¢ç±»">2.è‡ªå®šä¹‰åˆ‡é¢ç±»</h3>
<figure data-type="image" tabindex="2"><img src="https://xwz527.github.io/post-images/1588385709498.jpg" alt="" loading="lazy"></figure>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<ul>
<li>é¢å‘åˆ‡é¢ç¼–ç¨‹æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸€ä¸ªå¼ºå¤§çš„è¡¥å……</li>
<li>é€šè¿‡åˆ‡é¢å¯ä»¥æŠŠåˆ†æ•£åœ¨åº”ç”¨å„å¤„çš„è¡Œä¸ºæ”¾å…¥å¯é‡ç”¨çš„æ¨¡å—ä¸­</li>
<li>é€šè¿‡æ³¨è§£æ˜¾ç¤ºçš„å£°æ˜åœ¨ä»€ä¹ˆåœ°æ–¹åº”ç”¨è¯¥è¡Œä¸º</li>
<li>æœ‰æ•ˆå‡å°‘å†—ä½™ä»£ç ï¼Œè®©æˆ‘ä»¬çš„ç±»å…³æ³¨è‡ªèº«çš„ä¸»è¦åŠŸèƒ½</li>
<li>é€šè¿‡ä½¿ç”¨@Aspectæ³¨è§£å’Œç®€å•çš„é…ç½®ï¼Œå¯ä»¥å¾ˆç®€å•çš„åœ¨Springä¸­è£…é…adviceå’Œpointcut</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Githubç»‘å®šåŸŸå]]></title>
        <id>https://xwz527.github.io/post/github-bang-ding-yu-ming/</id>
        <link href="https://xwz527.github.io/post/github-bang-ding-yu-ming/">
        </link>
        <updated>2020-05-01T08:35:44.000Z</updated>
        <content type="html"><![CDATA[<p>#<em>1.åœ¨ä»“åº“é‡Œæ·»åŠ CNAMEæ–‡ä»¶å¹¶åœ¨æ–‡ä»¶ä¸­å¡«å†™ç»‘å®šçš„åŸŸå</em><br>
<img src="https://xwz527.github.io/post-images/1588322642354.jpg" alt="" loading="lazy"><br>
æ–‡ä»¶å†…å®¹ä¸ºè‡ªå·±çš„åŸŸåï¼ˆæ ¼å¼å¦‚ï¼šmasamoto.topï¼‰<br>
#<em>2.æ·»åŠ åŸŸåè§£æ</em><br>
ping è‡ªå·±å¯è®¿é—®çš„http://github.ioåŸŸåï¼Œå¾—åˆ°ä¸€ä¸ªIP<br>
<img src="https://xwz527.github.io/post-images/1588322661008.jpg" alt="" loading="lazy"><br>
ä¿®æ”¹åŸŸåè§£æè®°å½•<br>
<img src="https://xwz527.github.io/post-images/1588322682934.jpg" alt="" loading="lazy"><br>
æ·»åŠ ä¸¤ä¸ªAè®°å½•ï¼Œç”¨ä¸Šé¢å¾—åˆ°çš„IPï¼Œä¸€ä¸ªä¸»æœºè®°å½•ä¸ºï¼šâ€œwwwâ€ï¼Œä¸€ä¸ªä¸ºâ€œ@â€<br>
è¿™æ ·é€šè¿‡ <strong>http://masamoto.top/</strong>  å°±èƒ½è®¿é—®è‡ªå·±çš„åšå®¢äº†ã€‚<br>
ğŸ˜˜ Enjoy~</p>
]]></content>
    </entry>
</feed>